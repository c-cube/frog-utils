OASISFormat: 0.4
Name:        frogutils
Version:     dev
Homepage:    https://github.com/c-cube/frog-utils
Authors:     Simon Cruanes, Guillaume Bury
License:     BSD-2-clause
LicenseFile: LICENSE
Plugins:     META (0.3), DevFiles (0.3)
OCamlVersion: >= 4.01.0
BuildTools:  ocamlbuild
AlphaFeatures: compiled_setup_ml, ocamlbuild_more_args

XOCamlbuildExtraArgs: "-j 0 -plugin-tag 'package(js_of_ocaml.ocamlbuild)'"
#XOCamlbuildPluginTags: package(js_of_ocaml.ocamlbuild)

Synopsis:    Tools for running/testing/benchmarking provers and related logic tools

Flag "web"
  Description:      build and install the web UI for frogutils
  Default:          true

Flag "irc"
  Description:      build and install the IRC daemon for frogutils
  Default:          true

Library "frog"
  Path:             src/lib
  Pack:             true
  Modules:          Event, Html, Misc, Problem, Prover, Res, Test
  BuildDepends:     ppx_deriving_yojson, lwt, tyxml, lwt.ppx, toml, csv,
                    ppx_deriving.std, re.posix, containers,
                    result, olinq, uri, uuidm

Library "frog_server"
  Path:             src/server
  Pack:             true
  FindlibParent:    frog
  FindlibName:      server
  Modules:          Config, JUnit_wrapper, Lock_client, Lock_daemon,
                    Lock_messages, Maki_wrapper, Plot,
                    Run, TPTP, Test_run, Misc_unix, Pub_sub,
                    Storage, Event_storage, Problem_run, ProverSet
  BuildDepends:     frog, unix, lwt.unix, lwt.preemptive, cmdliner,
                    archimedes.cairo, junit, maki, printbox,
                    ZMQ, lwt-zmq, maki.yojson, ISO8601, threads

Executable frogweb
  Path:             src/web_server/
  Build$:           flag(web)
  Install$:         flag(web)
  CompiledObject:   best
  MainIs:           frogweb.ml
  BuildDepends:     frog, frog.server, opium.unix, threads

Executable frogmonitor
  Path:             src/main
  Build:            true
  Install:          true
  CompiledObject:   best
  MainIs:           frogmonitor.ml
  BuildDepends:     frog, frog.server, threads

Executable frogtptp
  Path:             src/main
  Build:            true
  Install:          true
  CompiledObject:   best
  MainIs:           frogtptp.ml
  BuildDepends:     frog, frog.server, threads

Executable frogirc
  Path:             src/irc
  CompiledObject:   best
  Build$:           flag(irc)
  Install$:         flag(irc)
  MainIs:           frogirc.ml
  BuildDepends:     frog, frog.server, threads, calculon

Executable frogtest
  Path:             src/main
  Install:          true
  CompiledObject:   best
  MainIs:           frogtest.ml
  BuildDepends:     frog, frog.server, threads

Executable froglock
  Path:             src/main
  Install:          true
  CompiledObject:   best
  MainIs:           froglock.ml
  BuildDepends:     frog, frog.server, threads

Executable frogwebclient
  Path:             src/js
  Install:          true
  CompiledObject:   byte
  MainIs:           frogwebclient.ml
  Build$:           flag(web)
  BuildDepends:     frog, react, lwt.react, reactiveData,
                    js_of_ocaml, js_of_ocaml.tyxml,
                    js_of_ocaml.ppx, js_of_ocaml.weak, ISO8601

PostBuildCommand: make js_links


